<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background: url('images/dashboard.png') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    /* Navbar */
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 10px 20px;
      background: rgba(0, 123, 255, 0.5); /* lighter transparency */
      color: white;
      box-sizing: border-box;
      z-index: 10;
    }

    nav .left {
      font-weight: bold;
      font-size: 20px;
    }

    nav .right {
      display: flex;
      gap: 20px;
    }

    nav .right a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    nav .right a:hover {
      text-decoration: underline;
    }

    .container {
      background: rgba(255, 255, 255, 0.45); /* more transparent */
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      width: 90%;
      max-width: 900px;
      margin-top: 30px;
    }

    h2 { text-align: center; margin-bottom: 20px; }

    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255,255,255,0.5); /* semi-transparent table */
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
    }
    th { background: rgba(0, 123, 255, 0.6); color: white; }

    button.delete-btn {
      padding: 5px 10px;
      background: red;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button.delete-btn:hover { background: darkred; }
  </style>
</head>
<body>

<nav>
  <div class="left">Feedback Collection System</div>
  <div class="right">
    <a href="feedback.html">Feedback Form</a>
    <a href="feedback.html">Logout</a>
  </div>
</nav>

<div class="container">
  <h2>Feedback Dashboard</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Rating</th>
        <th>Comments</th>
        <th>Date & Time</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="feedbackTable"></tbody>
  </table>
</div>

<script>
const feedbackTable = document.getElementById('feedbackTable');

function loadFeedbacks() {
  feedbackTable.innerHTML = "";
  const feedbacks = JSON.parse(localStorage.getItem('feedbacks')) || [];
  feedbacks.reverse().forEach((fb, index) => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${fb.name}</td>
      <td>${fb.email}</td>
      <td>${fb.rating} â˜…</td>
      <td>${fb.comments}</td>
      <td>${fb.timestamp || 'N/A'}</td>
      <td><button class="delete-btn" onclick="deleteFeedback(${feedbacks.length - 1 - index})">Delete</button></td>
    `;
    feedbackTable.appendChild(row);
  });
}

function deleteFeedback(index) {
  let feedbacks = JSON.parse(localStorage.getItem('feedbacks')) || [];
  if (confirm("Are you sure you want to delete this feedback?")) {
    feedbacks.splice(index, 1);
    localStorage.setItem('feedbacks', JSON.stringify(feedbacks));
    loadFeedbacks();
  }
}

loadFeedbacks();
</script>

</body>
</html>
